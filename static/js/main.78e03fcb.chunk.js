(this["webpackJsonpfile-sharing-p2p"]=this["webpackJsonpfile-sharing-p2p"]||[]).push([[0],{103:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAVklEQVR4Ae3WgQYAIAAD0f54/w8KYoCgOLlxADzAxsM5Nx8n6GfQ/bnsMJi5CwfTwsG0cDAtHEwLB9PCwbRwMC0cTAsH00LCFHVrqJshSJAgQYLOc24BCDllHPtXdTgAAAAASUVORK5CYII="},104:function(e,n,t){"use strict";(function(e){var a=t(15),l=t(0),o=t.n(l),c=t(105),r=t.n(c),i=t(40),u=t.n(i),s=t(106),f=t.n(s);function d(e){var n=e.url,t=Object(l.useRef)(null),a=Object(l.useCallback)((function(){var e,n,a;null===(e=t.current)||void 0===e||e.select(),null===(n=t.current)||void 0===n||n.setSelectionRange(0,99999),document.execCommand("copy"),null===(a=t.current)||void 0===a||a.setSelectionRange(0,0)}),[t]);return o.a.createElement("div",{className:"url-copy"},o.a.createElement("input",{className:"url-copy-input",type:"text",value:n,ref:t,readOnly:!0}),o.a.createElement("span",{className:"url-copy-button",onClick:function(){return a()}},o.a.createElement("img",{src:f.a,alt:"Copy url to clipboard"})))}n.a=function(n){var t,c=Object(l.useState)("loading"),i=Object(a.a)(c,2),s=i[0],f=i[1],m=Object(l.useState)(null),A=Object(a.a)(m,2),g=A[0],v=A[1];Object(l.useEffect)((function(){null==n.files&&n.onClose()}),[n.files]),Object(l.useEffect)((function(){if(null!=n.files){var t=new u.a;t.on("error",(function(e){f("error"),console.error(e)})),t.seed(n.files,(function(n){f("uploading");var t=e.from(n.magnetURI).toString("base64");v(t)}))}}),[n.files,v]);var E,b,w=function(){return"".concat(window.location.href,"download/").concat(null!=g?g:"")};return o.a.createElement("div",{className:"modal-root"},o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",null,"You are sharing file. Do not close this modal."),o.a.createElement("div",null,o.a.createElement(r.a,{className:"qrcode",renderAs:"svg",value:w()})),o.a.createElement("div",null,"uploading"===s?1===(null===(t=n.files)||void 0===t?void 0:t.length)?(E=n.files[0].name,b=30,E.length<=b?E:"".concat(E.slice(0,b-3),"...")):"many files":"Loading file..."),o.a.createElement(d,{url:null!=g?w():""}),o.a.createElement("button",{className:"button",onClick:n.onClose},"Close")))}}).call(this,t(1).Buffer)},106:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAwUlEQVR4Ae3OAQYCQRSH8bCAPUCAEMJiEUJYAoTQUTrAHKAjdIBFB+gQAcJiEcIihEEIrw8FsWa2xiS9Pz94eL7eh8tRokaFDYb4yjJYyAuLCaIuxQHSokaCYMuxwwXicEKBOSzEoYFBH15L0EA8rfFcCfF0RArnlpAOKgyQ4QzpYAHnDOTBtNz9uP+YvwrSoALmTUX4oHDTIA3SIA3SIA3SoMDTIA3SoBUkkhmcG+EaIaaC96bY4gZBaHuMofv93QGc9XVBb1MwIAAAAABJRU5ErkJggg=="},107:function(e,n,t){"use strict";n.a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,l=t.URL.createObjectURL(new Blob([new Uint8Array(n,0,n.length)])),o=a.createElement("a");o.href=l,o.setAttribute("download",e),o.click()}},108:function(e,n,t){"use strict";n.a=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=n?1e3:1024;if(Math.abs(e)<t)return e+" B";var a=n?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],l=-1;do{e/=t,++l}while(Math.abs(e)>=t&&l<a.length-1);return e.toFixed(1)+" "+a[l]}},109:function(e,n,t){e.exports=t.p+"static/media/download_file.052d4597.png"},112:function(e,n,t){e.exports=t(247)},117:function(e,n,t){},145:function(e,n){},147:function(e,n){},161:function(e,n){},164:function(e,n){},165:function(e,n){},167:function(e,n){},169:function(e,n){},171:function(e,n){},187:function(e,n){},192:function(e,n){},194:function(e,n){},195:function(e,n){},196:function(e,n){},199:function(e,n){},203:function(e,n){},204:function(e,n){},208:function(e,n){},211:function(e,n){},244:function(e,n){},247:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),o=t(54),c=t.n(o),r=(t(117),t(41)),i=t(39),u=t.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(38);u.a.setAppElement("#root"),c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,{basename:"/file-sharing-p2p"},l.a.createElement(r.b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,n,t){"use strict";t.d(n,"a",(function(){return A}));var a=t(0),l=t.n(a),o=t(16),c=t(15),r=t(39),i=t.n(r),u=t(103),s=t.n(u),f=t(104);var d=function(){var e=Object(a.useState)(!0),n=Object(c.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(!1),u=Object(c.a)(r,2),d=u[0],m=u[1],A=Object(a.useState)(null),g=Object(c.a)(A,2),v=g[0],E=g[1],b=function(e,n){e.preventDefault(),o(!n)},w=Object(a.useCallback)((function(e){var n;if(e.preventDefault(),o(!0),m(!0),e.dataTransfer.items){n=[];for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var a=e.dataTransfer.items[t].getAsFile();a&&n.push(a)}}else n=e.dataTransfer.files;if(n){for(var l=new Array,c=0;c<n.length;c++)l.push(n[c]);E(l)}}),[o]),h=Object(a.useCallback)((function(){(function(){var e=document.createElement("input");return e.type="file",e.multiple=!1,new Promise((function(n){e.onchange=function(){if(null==e.files)return n();var t=Array.from(e.files);return n(t)},e.click()}))})().then((function(e){null!=e&&(o(!0),m(!0),E(e))}))}),[E]),p=Object(a.useCallback)((function(e){return e.isModalShown?null:l.a.createElement("div",{className:"share-content"},l.a.createElement("div",{className:"file-drop-area",onDrop:w,onDragOver:function(e){return b(e,!0)},onDragLeave:function(e){return b(e,!1)},onClick:function(){return h()}},l.a.createElement("div",null,"Drop a file to upload"),l.a.createElement("img",{src:s.a,alt:"Upload file",draggable:!1}),l.a.createElement("div",null,"or click to browse")))}),[w,h]);return l.a.createElement("div",{className:"share-root"},l.a.createElement("div",{className:"".concat(t?"hide-overlay":"show-overlay")}),l.a.createElement(i.a,{isOpen:d&&null!=v,contentLabel:"File modal",className:"modal",overlayClassName:"modal-overlay",closeTimeoutMS:200},l.a.createElement(f.a,{files:v,onClose:function(){return m(!1)}})),l.a.createElement(p,{isModalShown:d}))},m=t(55),A=l.a.createContext({magnet:null});n.b=function(){return l.a.createElement(o.c,null,l.a.createElement(A.Provider,{value:{magnet:null}},l.a.createElement(o.a,{path:"/download/:fileID"},l.a.createElement(m.a,null)),l.a.createElement(o.a,{path:"/download/"},l.a.createElement(m.a,null)),l.a.createElement(o.a,{path:"/"},l.a.createElement(d,null))))}},55:function(e,n,t){"use strict";(function(e){var a=t(15),l=t(0),o=t.n(l),c=t(16),r=t(40),i=t.n(r),u=t(107),s=t(108),f=t(109),d=t.n(f),m=t(41);n.a=function(){var n=Object(c.g)(),t=Object(l.useContext)(m.a),r=Object(l.useState)(0),f=Object(a.a)(r,2),A=f[0],g=f[1],v=Object(l.useState)("waiting"),E=Object(a.a)(v,2),b=E[0],w=E[1],h=Object(c.f)();return Object(l.useEffect)((function(){null!=n.fileID&&(t.magnet=n.fileID,h.replace("/download/"))}),[n,t,h]),Object(l.useEffect)((function(){null==t.magnet&&null==n.fileID&&h.replace("/")}),[n,t,h]),Object(l.useEffect)((function(){if(null!=t.magnet&&null==n.fileID){var a=t.magnet;w("downloading");var l=new i.a,o=e.from(a,"base64").toString("utf-8");console.log("Look for: ",o),l.add(o,(function(e){console.log("Client is downloading:",e.infoHash);var n=setInterval((function(){g(e.downloadSpeed)}),1e3);e.on("done",(function(){clearInterval(n),w("downloaded"),e.files.forEach((function(e){console.log(e.name),e.getBuffer((function(n,t){null==n&&null!=t&&Object(u.a)(e.name,t)}))}))}))}))}}),[t,n]),o.a.createElement("div",{className:"download-root"},o.a.createElement("div",{className:"download-border"},o.a.createElement("div",{className:"download-body"},o.a.createElement("img",{src:d.a,alt:"Download file",draggable:!1}),function(e){switch(e){case"waiting":return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Waiting for server..."));case"downloading":return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"You are downloading."),o.a.createElement("div",null,Object(s.a)(A),"/s"));case"downloaded":return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Downloading finished."))}}(b))))}}).call(this,t(1).Buffer)}},[[112,1,2]]]);
//# sourceMappingURL=main.78e03fcb.chunk.js.map